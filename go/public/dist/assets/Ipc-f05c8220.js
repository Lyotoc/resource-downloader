import{i as e}from"./index-21f5463a.js";import{i as n}from"./ipcRenderer-5e19eaee.js";import{_ as o}from"./_plugin-vue_export-helper-1b428a4d.js";import{r as l,o as s,m as a,a as i,b as c,f as t,e as d,d as r,w as u,h as w,t as f}from"./index-f3211453.js";const p={id:"app-socket-ipc"},k={class:"one-block-2"},v={class:"one-block-2"},m={class:"one-block-2"},_={class:"one-block-2"},g=o({__name:"Ipc",setup(o){const g=l(""),b=l(""),y=l(""),M=l(""),S={type:"vue",content:"#/special/subwindow",windowName:"window2",windowTitle:"ipc window"};function C(){n.send(e.framework.ipcSendMsg,{type:"start",content:"开始"})}function h(){n.send(e.framework.ipcSendMsg,{type:"end",content:""})}function W(){n.invoke(e.framework.ipcInvokeMsg,"异步-回调").then((e=>{console.log("r:",e),b.value=e}))}async function j(){const o=await n.invoke(e.framework.ipcInvokeMsg,"异步");console.log("msg:",o),y.value=o}function x(){const o=n.sendSync(e.framework.ipcSendSyncMsg,"同步");M.value=o}return s((()=>{n.removeAllListeners(e.framework.ipcSendMsg),n.on(e.framework.ipcSendMsg,((n,o)=>{console.log("[ipcRenderer] [socketMsgStart] result:",o),g.value=o,n.sender.send(e.framework.hello,"electron-egg")})),n.removeAllListeners(e.os.window2ToWindow1),n.on(e.os.window2ToWindow1,((e,n)=>{a.info(n)}))})),(o,l)=>{const s=i("a-button"),a=i("a-space");return c(),t("div",p,[l[10]||(l[10]=d("div",{class:"one-block-1"},[d("span",null," 1. 发送异步消息 ")],-1)),d("div",k,[r(a,null,{default:u((()=>[r(s,{onClick:W},{default:u((()=>l[2]||(l[2]=[w("发送 - 回调")]))),_:1}),w(" 结果："+f(b.value),1)])),_:1}),l[4]||(l[4]=d("p",null,null,-1)),r(a,null,{default:u((()=>[r(s,{onClick:j},{default:u((()=>l[3]||(l[3]=[w("发送 - async/await")]))),_:1}),w(" 结果："+f(y.value),1)])),_:1})]),l[11]||(l[11]=d("div",{class:"one-block-1"},[d("span",null," 2. 同步消息（不推荐，阻塞执行） ")],-1)),d("div",v,[r(a,null,{default:u((()=>[r(s,{onClick:x},{default:u((()=>l[5]||(l[5]=[w("同步消息")]))),_:1}),w(" 结果："+f(M.value),1)])),_:1})]),l[12]||(l[12]=d("div",{class:"one-block-1"},[d("span",null," 3. 长消息： 服务端持续向前端页面发消息 ")],-1)),d("div",m,[r(a,null,{default:u((()=>[r(s,{onClick:C},{default:u((()=>l[6]||(l[6]=[w("开始")]))),_:1}),r(s,{onClick:h},{default:u((()=>l[7]||(l[7]=[w("结束")]))),_:1}),w(" 结果："+f(g.value),1)])),_:1})]),l[13]||(l[13]=d("div",{class:"one-block-1"},[d("span",null," 4. 多窗口通信：子窗口与主进程通信，子窗口互相通信 ")],-1)),d("div",_,[r(a,null,{default:u((()=>[r(s,{onClick:l[0]||(l[0]=o=>{n.invoke(e.os.createWindow,S).then((e=>{console.log("[createWindow] wcid:",e)}))})},{default:u((()=>l[8]||(l[8]=[w("打开新窗口2")]))),_:1}),r(s,{onClick:l[1]||(l[1]=o=>async function(){n.invoke(e.os.window1ToWindow2,{receiver:"window2",content:"窗口1给窗口2发送消息"})}())},{default:u((()=>l[9]||(l[9]=[w("向新窗口2发消息")]))),_:1})])),_:1})])])}}},[["__scopeId","data-v-077f1477"]]);export{g as default};
