import{i as n}from"./index-21f5463a.js";import{i as e}from"./ipcRenderer-5e19eaee.js";import{_ as o}from"./_plugin-vue_export-helper-1b428a4d.js";import{r as l,o as s,m as a,a as c,b as i,f as t,e as d,d as r,w as u,h as f,t as p}from"./index-f3211453.js";const k={id:"app-os-subwindow-ipc"},v={class:"one-block-2"},m={class:"one-block-2"},w={class:"one-block-2"},_={class:"one-block-2"},g=o({__name:"Ipc",setup(o){const g=l(""),b=l(""),M=l(""),S=l("");function y(){e.send(n.framework.ipcSendMsg,{type:"start",content:"开始"})}function C(){e.send(n.framework.ipcSendMsg,{type:"end",content:""})}function h(){e.invoke(n.framework.ipcInvokeMsg,"异步-回调").then((n=>{console.log("r:",n),b.value=n}))}async function j(){const o=await e.invoke(n.framework.ipcInvokeMsg,"异步");console.log("msg:",o),M.value=o}function x(){const o=e.sendSync(n.framework.ipcSendSyncMsg,"同步");S.value=o}return s((()=>{e.on(n.framework.ipcSendMsg,((e,o)=>{console.log("[ipcRenderer] [socketMsgStart] result:",o),g.value=o,e.sender.send(n.framework.hello,"electron-egg")})),e.removeAllListeners(n.os.window1ToWindow2),e.on(n.os.window1ToWindow2,((n,e)=>{a.info(e)}))})),(o,l)=>{const s=c("a-button"),a=c("a-space");return i(),t("div",k,[l[8]||(l[8]=d("div",{class:"one-block-1"},[d("span",null," 1. 发送异步消息 ")],-1)),d("div",v,[r(a,null,{default:u((()=>[r(s,{onClick:h},{default:u((()=>l[1]||(l[1]=[f("发送 - 回调")]))),_:1}),f(" 结果："+p(b.value),1)])),_:1}),l[3]||(l[3]=d("p",null,null,-1)),r(a,null,{default:u((()=>[r(s,{onClick:j},{default:u((()=>l[2]||(l[2]=[f("发送 - async/await")]))),_:1}),f(" 结果："+p(M.value),1)])),_:1})]),l[9]||(l[9]=d("div",{class:"one-block-1"},[d("span",null," 2. 同步消息（不推荐，阻塞执行） ")],-1)),d("div",m,[r(a,null,{default:u((()=>[r(s,{onClick:x},{default:u((()=>l[4]||(l[4]=[f("同步消息")]))),_:1}),f(" 结果："+p(S.value),1)])),_:1})]),l[10]||(l[10]=d("div",{class:"one-block-1"},[d("span",null," 3. 长消息： 服务端持续向前端页面发消息 ")],-1)),d("div",w,[r(a,null,{default:u((()=>[r(s,{onClick:y},{default:u((()=>l[5]||(l[5]=[f("开始")]))),_:1}),r(s,{onClick:C},{default:u((()=>l[6]||(l[6]=[f("结束")]))),_:1}),f(" 结果："+p(g.value),1)])),_:1})]),l[11]||(l[11]=d("div",{class:"one-block-1"},[d("span",null," 4. 多窗口通信：窗口之间互相通信 ")],-1)),d("div",_,[r(a,null,{default:u((()=>[r(s,{onClick:l[0]||(l[0]=o=>{e.invoke(n.os.window1ToWindow2,{receiver:"main",content:"窗口2给主窗口发送消息"})})},{default:u((()=>l[7]||(l[7]=[f("向主窗口发消息")]))),_:1})])),_:1})])])}}},[["__scopeId","data-v-2cb52ebc"]]);export{g as default};
